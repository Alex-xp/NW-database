var SQLITE_LIB=require("./build/Release/sqlite.node");SQLITE_LIB.Version=function(){return this.c_Version()},SQLITE_LIB.Connect=function(a){var b=this.c_Connect(a);return b||this.debug&&window.alert("ОШИБКА СОЕДИНЕНИЯ С БАЗОЙ ДАННЫХ "+a),b},SQLITE_LIB.debug=!0,SQLITE_LIB.ErrorMsg="",SQLITE_LIB.Error=function(){return this.ErrorMsg=this.c_GetErr(),this.ErrorMsg},SQLITE_LIB.RESULT=function(){return this.result=Array(),this.rows_count=0,this.filelds_count=0,this.fields_names=Array(),this.getForName=function(a,b){return this.result[a][b]},this.get=function(a,b){var c=this.fields_names[b];return this.result[a][c]},this.getFName=function(a){return this.fields_names[a]},this},SQLITE_LIB.Exec=function(a){var b=this.c_Exec(a);return b||this.debug&&window.alert("ОШИБКА SQLITE3: "+this.Error()),b},SQLITE_LIB.Query=function(a){var b=new SQLITE_LIB.RESULT;if(b.result=this.c_Query(a),b.result||this.debug&&window.alert("ОШИБКА SQLITE3: "+this.Error()),b.rows_count=b.result.length,b.rows_count>0){var c=0;for(fx in b.result[0])b.fields_names[c]=fx,c++;b.filelds_count=b.fields_names.length}return b},SQLITE_LIB.GetTablesDB=function(){return SQLITE_LIB.Query('SELECT name FROM sqlite_master WHERE type = "table"')},SQLITE_LIB.WHERE=function(a){return this.__where=""+a,this.ins=function(a){return this.__where=this.__where+"("+a+") ",this},this.add=function(a){return this.__where=this.__where+a,this},this._AND=function(){return this.__where=this.__where+" AND ",this},this._OR=function(){return this.__where=this.__where+" OR ",this},this._XOR=function(){return this.__where=this.__where+" XOR ",this},this._LIKE=function(){return this.__where=this.__where+" LIKE ",this},this.insAND=function(a){return this.__where=this.__where+" AND("+a.__where+") ",this},this.insOR=function(a){return this.__where=this.__where+" OR("+a.__where+") ",this},this.insXOR=function(a){return this.__where=this.__where+" XOR("+a.__where+") ",this},this.insLIKE=function(a){return this.__where=this.__where+" LIKE("+a.__where+") ",this},this.AND=function(a){return this.__where=this.__where+" AND "+a+" ",this},this.OR=function(a){return this.__where=this.__where+" OR "+a+" ",this},this.XOR=function(a){return this.__where=this.__where+" XOR "+a+" ",this},this.LIKE=function(a,b){return this.__where=this.__where+" "+a+" LIKE %"+b+"% ",this},this},SQLITE_LIB.F_TEXT="TEXT ",SQLITE_LIB.F_INT="INTEGER ",SQLITE_LIB.F_PK="PRIMARY KEY ",SQLITE_LIB.F_NUM="NUMERIC ",SQLITE_LIB.F_FLOAT="REAL ",SQLITE_LIB.F_UNIQUE="UNIQUE ",SQLITE_LIB.F_NONE="NONE ",SQLITE_LIB.F_ASC="ASC ",SQLITE_LIB.F_DESC="DESC ",SQLITE_LIB.F_NOT_NULL="NOT NULL ",SQLITE_LIB.FIELD=function(a){return this.fname=a.name||"noName",this.type="",void 0===a.type?this.type="":this.type=" "+a.type,this.__getSQL=function(){return this.fname+this.type},this},SQLITE_LIB.SQL=function(){this.sql="",this.__isRes=!0,this.__tables=[],this.table=function(a){return this.__tables=null,this.__tables=[],this.__tables[0]=a,this},this.tables=function(a){this.__tables=null,this.__tables=[];for(var b=0;b<a.length;b++)this.__tables[b]=a[b];return this},this.__fields=[],this.select=function(a){this.__isRes=!0,this.__fields=null,this.__fields=a;for(var b="SELECT ",c=0;c<a.length;c++)b+=a[c],c<a.length-1&&(b+=","),b+=" ";b+="FROM ";for(var c=0;c<this.__tables.length;c++)b+=this.__tables[c],c<this.__tables.length-1&&(b+=","),b+=" ";return this.sql=b,this},this.create=function(a,b){this._NE="",void 0!==b&&b!==!1&&(this._NE="IF NOT EXISTS "),this.__isRes=!1;for(var c="CREATE TABLE "+this._NE,d=0;d<this.__tables.length;d++)c+=this.__tables[d],d<this.__tables.length-1&&(c+=","),c+=" ";if(c+="(","string"==typeof a)c+=a;else for(var d=0;d<a.length;d++)c+=a[d].__getSQL(),d<a.length-1&&(c+=","),c+=" ";return c+=")",this.sql=c,this},this.drop_table=function(a,b){return this._NE="",void 0!==b&&b!==!1&&(this._NE="IF EXISTS "),this.sql="DROP TABLE "+this._NE+a,this},this.insert=function(a){this.__isRes=!1;for(var b="INSERT INTO ",c=0;c<this.__tables.length;c++)b+=this.__tables[c],c<this.__tables.length-1&&(b+=","),b+=" ";if("string"==typeof a)b=a;else{b+="(";var d=0;for(var e in a)d>0&&(b+=", "),b+=e,d++;b+=") VALUES (";var d=0;for(var e in a)d>0&&(b+=", "),b=b+"'"+a[e].replace(/'/g,"&#39;")+"'",d++;b+=")"}return this.sql=b,this},this.update=function(a){this.__isRes=!1;for(var b="UPDATE ",c=0;c<this.__tables.length;c++)b+=this.__tables[c],c<this.__tables.length-1&&(b+=","),b+=" ";var b=b+"SET ",d=0;for(fx in a)d>0&&(b+=","),b+=" ",b=b+fx+"='"+a[fx].replace(/'/g,"&#39;")+"'",d++;return b+=" ",this.sql=b,this},this.where=function(a){var b="";return b="string"==typeof a?"WHERE "+a+" ":"WHERE "+a.__where,this.sql=this.sql+b,this},this.limit=function(a,b){var c=b||"";return""!==c&&(c=","+b),this.sql=this.sql+"LIMIT "+a+c+" ",this},this.order_by=function(a){for(var b="ORDER BY ",c=0;c<a.length;c++)b+=a[c],c<a.length-1&&(b+=","),b+=" ";return this.sql=this.sql+b,this},this.exec=function(a){var b=a||"",c=null;return c=this.__isRes?SQLITE_LIB.Query(this.sql+b):SQLITE_LIB.Exec(this.sql+b)}},module.exports=SQLITE_LIB;